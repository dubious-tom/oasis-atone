syntax = "proto3";
package osmosis.gamm.v1beta1;

import "gogoproto/gogo.proto";
import "osmosis/gamm/v1beta1/pool.proto";
import "cosmos/base/v1beta1/coin.proto";

option go_package = "github.com/c-osmosis/osmosis/x/gamm/types";

service Msg {
    rpc CreatePool(MsgCreatePool) returns (MsgCreatePoolResponse);
    rpc JoinPool(MsgJoinPool) returns (MsgJoinPoolResponse);
    rpc ExitPool(MsgExitPool) returns (MsgExitPoolResponse);
    rpc SwapExactAmountIn(MsgSwapExactAmountIn) returns (MsgSwapExactAmountInResponse);
    rpc SwapExactAmountOut(MsgSwapExactAmountOut) returns (MsgSwapExactAmountOutResponse);
    rpc JoinSwapExternAmountIn(MsgJoinSwapExternAmountIn) returns (MsgJoinSwapExternAmountInResponse);
    rpc JoinSwapPoolAmountOut(MsgJoinSwapPoolAmountOut) returns (MsgJoinSwapPoolAmountOut);
    rpc ExitSwapExternAmountOut(MsgExitSwapExternAmountOut) returns (MsgExitSwapExternAmountOut);
    rpc ExitSwapPoolAmountIn(MsgExitSwapPoolAmountIn) returns (MsgExitSwapPoolAmountIn);
}

// ===================== MsgCreatePool
message BindingToken {
    cosmos.base.v1beta1.Coin token = 1 [
        (gogoproto.moretags) = "yaml:\"token_in\"",
        (gogoproto.nullable) = false
    ];
    string weight = 2 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"weight\"",
        (gogoproto.nullable) = false
    ];
}

message MsgCreatePool {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];

    PoolParams poolParams = 2 [
        (gogoproto.moretags) = "yaml:\"pool_params\""
    ];

    repeated BindingToken bindingTokens = 3 [
        (gogoproto.moretags) = "yaml:\"binding_tokens\"",
        (gogoproto.nullable) = false
    ];
}

message MsgCreatePoolResponse {}

// ===================== MsgJoinPool
message MsgJoinPool {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string shareOutAmount = 3 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"pool_amount_out\"",
        (gogoproto.nullable) = false
    ];
    repeated cosmos.base.v1beta1.Coin tokenInMaxAmounts = 4 [
        (gogoproto.moretags) = "yaml:\"token_in_max_amounts\"",
        (gogoproto.nullable) = false
    ];
}

message MsgJoinPoolResponse {}

// ===================== MsgExitPool
message MsgExitPool {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string shareInAmount = 3 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"share_in_amount\"",
        (gogoproto.nullable) = false
    ];

    repeated cosmos.base.v1beta1.Coin tokenOutMinAmounts = 4 [
        (gogoproto.moretags) = "yaml:\"token_out_min_amounts\"",
        (gogoproto.nullable) = false
    ];
}

message MsgExitPoolResponse {}

// ===================== MsgSwapExactAmountIn
message MsgSwapExactAmountIn {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    cosmos.base.v1beta1.Coin tokenIn = 3 [
        (gogoproto.moretags) = "yaml:\"token_in\"",
        (gogoproto.nullable) = false
    ];
    string tokenOutDenom = 4 [
        (gogoproto.moretags) = "yaml:\"token_out_denom\""
    ];
    string tokenOutMinAmount = 5 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"token_out_min_amount\"",
        (gogoproto.nullable) = false
    ];
    string maxSpotPrice = 6 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Dec",
        (gogoproto.moretags) = "yaml:\"max_spot_price\"",
        (gogoproto.nullable) = false
    ];
}

message MsgSwapExactAmountInResponse {}

// ===================== MsgSwapExactAmountOut
message MsgSwapExactAmountOut {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string tokenInDenom = 3 [
        (gogoproto.moretags) = "yaml:\"token_in_denom\""
    ];
    string tokenInMaxAmount = 4 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"token_in_max_amount\"",
        (gogoproto.nullable) = false
    ];
    cosmos.base.v1beta1.Coin tokenOut = 5 [
        (gogoproto.moretags) = "yaml:\"token_out\"",
        (gogoproto.nullable) = false
    ];
    string maxSpotPrice = 6 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Dec",
        (gogoproto.moretags) = "yaml:\"max_spot_price\"",
        (gogoproto.nullable) = false
    ];
}

message MsgSwapExactAmountOutResponse {}

// ===================== MsgJoinSwapExternAmountIn
message MsgJoinSwapExternAmountIn {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    cosmos.base.v1beta1.Coin tokenIn = 3 [
        (gogoproto.moretags) = "yaml:\"token_in\"",
        (gogoproto.nullable) = false
    ];
    string shareOutMinAmount = 4 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"share_out_min_amount\"",
        (gogoproto.nullable) = false
    ];
}

message MsgJoinSwapExternAmountInResponse {}

// ===================== MsgJoinSwapPoolAmountOut
message MsgJoinSwapPoolAmountOut {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string tokenInDenom = 3 [
        (gogoproto.moretags) = "yaml:\"token_in_denom\""
    ];
    string shareOutAmount = 4 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"share_out_amount\"",
        (gogoproto.nullable) = false
    ];
    string tokenInMaxAmount = 5 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"token_in_max_amount\"",
        (gogoproto.nullable) = false
    ];
}

message MsgJoinSwapPoolAmountOutResponse {}

// ===================== MsgExitSwapPoolAmountIn
message MsgExitSwapPoolAmountIn {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string tokenOutDenom = 3 [
        (gogoproto.moretags) = "yaml:\"token_out_denom\""
    ];
    string shareInAmount = 4 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"share_in_amount\"",
        (gogoproto.nullable) = false
    ];
    string tokenOutMinAmount = 5 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"token_out_min_amount\"",
        (gogoproto.nullable) = false
    ];
}

message MsgExitSwapPoolAmountInResponse {}

// ===================== MsgExitSwapExternAmountOut
message MsgExitSwapExternAmountOut {
    string sender = 1 [
        (gogoproto.moretags) = "yaml:\"sender\""
    ];
    uint64 poolId = 2 [
        (gogoproto.moretags) = "yaml:\"pool_id\""
    ];
    string tokenOutDenom = 3 [
        (gogoproto.moretags) = "yaml:\"token_out_denom\""
    ];
    string tokenOutAmount = 4 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"token_out_amount\"",
        (gogoproto.nullable) = false
    ];
    string shareInMaxAmount = 5 [
        (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Int",
        (gogoproto.moretags) = "yaml:\"share_in_max_amount\"",
        (gogoproto.nullable) = false
    ];
}

message MsgExitSwapExternAmountOutResponse {}
